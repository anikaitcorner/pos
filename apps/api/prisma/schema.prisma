generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

model User {
  id        String    @id @default(uuid())
  name      String
  username  String    @unique()
  email     String    @unique()
  password  String
  business  Business?
  role      Role      @default(ADMIN)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @default(now())
}

model Business {
  id       String  @id @default(uuid())
  name     String
  location String?
  user     User    @relation(fields: [userId], references: [id])
  userId   String  @unique

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now())
}

model Product {
  id           String        @id @default(uuid())
  name         String
  category     Category[]
  price        Float
  sellingPrice Float         @default(dbgenerated("sellingPrice"))
  quantity     Int           @default(0)
  discount     Int
  unitType     String
  unitNumber   String
  grossProfit  Float
  grossMargin  Float
  status       ProductStatus @default(UNSOLD)
}

model Category {
  id      String    @id @default(uuid())
  name    String
  product Product[]
}

enum ProductStatus {
  SOLD
  UNSOLD
  LOST
  RETURNED
}

enum Role {
  ADMIN
  SALES_MAN
  MANAGER
}
